---
title: "Installing Bookinfo"
---

Bookinfo Application
--------------------

The following steps describe deployment of Bookinfo application on Maistra running on Openshift.

Before you Begin
----------------

Install Maistra by following the instructions here <<<add link>>>.  


Update Security Context Constraints
-----------------------------------

To add the service account used by Bookinfo application to anyuid SCC in "myproject" namespace:

```
  $ oc adm policy add-scc-to-user anyuid -z default -n myproject
```

Deploying Bookinfo Application
------------------------------

. Download bookinfo.yaml into your local directory:
+
```
  $ curl -o bookinfo.yaml https://raw.githubusercontent.com/Maistra/bookinfo/master/bookinfo.yaml
```

. Deploy Bookinfo application in "myproject" namespace:
+   
```
  $ oc apply -n myproject -f bookinfo.yaml
```

. Download bookinfo-gateway.yaml into your local directory:
+
```
  $ curl -o bookinfo-gateway.yaml https://raw.githubusercontent.com/Maistra/bookinfo/master/bookinfo-gateway.yaml 
```

. Create the ingress gateway for Bookinfo:
+
```
  $ oc apply -f bookinfo-gateway.yaml
```

. Set GATEWAY_URL:
+
```
  $ export GATEWAY_URL=$(oc get route istio-ingressgateway -n istio-system -o=jsonpath="{.spec.host}")
```


Confirm Bookinfo is running
---------------------------

To confirm that the application has been successfully deployed:

```
  $ curl -o /dev/null -s -w "%{http_code}\n" http://$GATEWAY_URL/productpage
```

Alternatively, you can open `http://$GATEWAY_URL/productpage` in your browser.

Cleanup
-------

. Download cleanup script:
+
```
  $ curl -o cleanup.sh https://raw.githubusercontent.com/Maistra/bookinfo/master/cleanup.sh && chmod +x ./cleanup.sh
```

. Delete bookinfo virtualservice, gateway, and terminate the pods:
+
```
  $ ./cleanup.sh
  namespace ? [default] myproject
```

. Confirm shutdown:
+
```
  $ oc get virtualservices -n myproject
  No resources found.
  $ oc get gateway -n myproject
  No resources found.
  $ oc get pods -n myproject
  No resources found.
```
